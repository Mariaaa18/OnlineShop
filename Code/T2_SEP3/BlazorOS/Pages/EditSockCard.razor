@page "/EditSockCard/{id:int}"
@using global::Shared.Models
@using HttpClients.ClientInterfaces
@using global::Shared.DTOs
@inject ISockCardService sockService;
@inject NavigationManager _navigationManager;
<h3>EditSockCard</h3>
<div class="container">
    @if (card == null)
    {
        <p>laoding...</p>
    }
    else
    {
        <div>
            <label for="inputTitle">Title:</label>
            <input type="text" class="form-control" id="inputTitle" @bind-value="card.Title"/>
        </div>
        <div>
            <label for="inputDescription">Description:</label>
            <input type="text" class="form-control" id="inputDescription" @bind-value="card.Description"/>
        </div>
        <div>
            <label for="inputPrice">Price:</label>
            <input type="number" class="form-control" id="inputPrice" @bind-value="card.Price"/>
        </div>
        <div>
            <label for="inputMaterial">Material:</label>
            <input type="text" class="form-control" id="inputMaterial" @bind-value="card.Material"/>
        </div>
        <div>
            <label for="inputImage">Image:</label>
            <input type="text" class="form-control" id="inputImage" @bind-value="card.Image"/>
        </div>
        <div>
            <label for="inputType">Type:</label>
            <input type="text" class="form-control" id="inputType" @bind-value="card.Type"/>
            
      
        </div>
       
        
        <button @onclick="Edit" >edit</button>
    }
    <p>@msg</p>
</div>
@code {
    SocksCard card;
   
    

    [Parameter]
    public int Id { get; set; }

    String msg = "";

    private async void Edit()
    {
        try
        {
            UpdateSocksCardDto dto = new UpdateSocksCardDto(Id);
            await sockService.UpdateAsync(dto);
            msg = "card updated";
        }
        catch (Exception e)
        {
            Console.WriteLine(e);
            msg = e.Message;
        }
    }

    protected override async Task OnParametersSetAsync()
    {
        try
        {
            card = await sockService.GetById(Id);
        }
        catch (Exception e)
        {
            msg = e.Message;
        }
    }
    

}